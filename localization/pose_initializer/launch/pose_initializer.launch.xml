<launch>
  <arg name="common_config_file" default="$(find-pkg-share pose_initializer)/config/pose_initializer_common.param.yaml"/>
  <arg name="config_file" default="$(find-pkg-share pose_initializer)/config/pose_initializer.param.yaml"/>
  <arg name="sub_gnss_pose_cov" default="sub_gnss_pose_cov"/>

  <arg name="ekf_trigger_node" default="/localization/pose_twist_fusion_filter/trigger_node"/>
  <arg name="ndt_trigger_node" default="/localization/pose_estimator/trigger_node"/>
  <arg name="pose_reset" default="/initialpose3d"/>
  <arg name="partial_map_load" default="/map/get_partial_pointcloud_map"/>

  <node pkg="pose_initializer" exec="pose_initializer_node" name="pose_initializer_node">
    <param from="$(var common_config_file)"/>
    <param from="$(var config_file)"/>
    <remap from="yabloc_align" to="/localization/yabloc/initializer/yabloc_align_srv"/>
    <remap from="ndt_align" to="/localization/pose_estimator/ndt_align_srv"/>
    <remap from="stop_check_twist" to="/sensing/vehicle_velocity_converter/twist_with_covariance"/>
    <remap from="gnss_pose_cov" to="$(var sub_gnss_pose_cov)"/>
    <remap from="pose_reset" to="$(var pose_reset)"/>
    <remap from="ekf_trigger_node" to="$(var ekf_trigger_node)"/>
    <remap from="ndt_trigger_node" to="$(var ndt_trigger_node)"/>
    <param name="map_loader_name" value="/map/pointcloud_map_loader"/>
    <remap from="~/pointcloud_map" to="/map/pointcloud_map"/>
    <remap from="~/partial_map_load" to="$(var partial_map_load)"/>
  </node>
</launch>
